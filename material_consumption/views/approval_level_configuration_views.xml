<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Approval Level Configuration List View -->
        <record id="view_approval_level_config_list" model="ir.ui.view">
            <field name="name">approval.level.configuration.list</field>
            <field name="model">approval.level.configuration</field>
            <field name="arch" type="xml">
                <list string="Approval Level Configurations" decoration-success="active" decoration-muted="not active">
                    <field name="sequence" widget="handle"/>
                    <field name="name"/>
                    <field name="level_number"/>
                    <field name="approval_type"/>
                    <field name="min_amount"/>
                    <field name="max_amount"/>

                    <field name="active"/>
                </list>
            </field>
        </record>

        <!-- Approval Level Configuration Form View -->
        <record id="view_approval_level_config_form" model="ir.ui.view">
            <field name="name">approval.level.configuration.form</field>
            <field name="model">approval.level.configuration</field>
            <field name="arch" type="xml">
                <form string="Approval Level Configuration">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <field name="active" widget="boolean_toggle"/>
                        </div>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="level_number"/>
                                <field name="sequence"/>
                            </group>
                            <group>
                                <field name="approval_type"/>
                                <field name="company_id"/>
                            </group>
                        </group>
                        <group string="Amount Configuration" invisible="approval_type != 'amount'">
                            <group>
                                <field name="min_amount"/>
                                <field name="max_amount"/>
                                <field name="currency_id" invisible="1"/>
                            </group>
                        </group>
                        <group string="Approver Groups">
                            <field name="approver_group_ids" widget="many2many_tags" placeholder="Select approver groups"/>
                        </group>
                        <field name="description" placeholder="Enter description for this approval level..."/>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Approval Level Configuration Search View -->
        <record id="view_approval_level_config_search" model="ir.ui.view">
            <field name="name">approval.level.configuration.search</field>
            <field name="model">approval.level.configuration</field>
            <field name="arch" type="xml">
                <search string="Search Approval Level Configurations">
                    <field name="name"/>
                    <field name="level_number"/>
                    <filter name="active" string="Active" domain="[('active', '=', True)]"/>
                    <filter name="inactive" string="Inactive" domain="[('active', '=', False)]"/>
                    <group>
                        <filter name="group_by_approval_type" string="Approval Type" context="{'group_by': 'approval_type'}"/>
                        <filter name="group_by_company" string="Company" context="{'group_by': 'company_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!-- Approval Level Configuration Action -->
        <record id="action_approval_level_configuration" model="ir.actions.act_window">
            <field name="name">Approval Level Configurations</field>
            <field name="res_model">approval.level.configuration</field>
            <field name="view_mode">list,form</field>
            <field name="search_view_id" ref="view_approval_level_config_search"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new approval level configuration.
                </p>
                <p>
                    Configure approval levels with different thresholds and approver groups.
                </p>
            </field>
        </record>

        <!-- Material Request Approval Level List View -->
        <record id="view_material_request_approval_level_list" model="ir.ui.view">
            <field name="name">material.request.approval.level.list</field>
            <field name="model">material.request.approval.level</field>
            <field name="arch" type="xml">
                <list string="Material Request Approval Levels" decoration-muted="state == 'pending'" decoration-success="state == 'approved'" decoration-danger="state == 'rejected'">
                    <field name="request_id"/>
                    <field name="level_number"/>
                    <field name="approver_id"/>
                    <field name="state"/>
                    <field name="approved_date"/>
                    <field name="comments"/>
                </list>
            </field>
        </record>

        <!-- Material Request Approval Level Form View -->
        <record id="view_material_request_approval_level_form" model="ir.ui.view">
            <field name="name">material.request.approval.level.form</field>
            <field name="model">material.request.approval.level</field>
            <field name="arch" type="xml">
                <form string="Material Request Approval Level">
                    <sheet>
                        <group>
                            <group>
                                <field name="request_id"/>
                                <field name="configuration_id"/>
                            </group>
                            <group>
                                <field name="level_number"/>
                                <field name="approver_id"/>
                            </group>
                        </group>
                        <group>
                            <field name="state"/>
                            <field name="approved_date"/>
                        </group>
                        <field name="comments"/>
                        <group invisible="state != 'pending'">
                            <button name="action_approve" type="object" string="Approve" class="oe_highlight"/>
                            <button name="action_reject" type="object" string="Reject" class="btn-danger"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Material Request Approval Level Action -->
        <record id="action_material_request_approval_level" model="ir.actions.act_window">
            <field name="name">Material Request Approval Levels</field>
            <field name="res_model">material.request.approval.level</field>
            <field name="view_mode">list,form</field>
            <field name="context">{}</field>
        </record>
    </data>
</odoo>
